{"version":3,"sources":["../../../../src/snake-game/models/game-state.model.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CACF,MAAM,CAAC,OAAO,CAAC,CACf,OAAO,CAAC,WAAW,EAAE,gBAAgB,CAAC,CAAC;;AAE5C,SAAS,gBAAgB,CAAC,UAAU,EAAE;AAClC,QAAI,OAAO,GAAG;AACV,aAAK,EAAE,EAAE;AACT,kBAAU,EAAG,CAAC;AACd,aAAK,EAAG,IAAI;AACZ,aAAK,EAAE,KAAK;AACZ,aAAK,EAAE,KAAK;AACZ,cAAM,EAAE,MAAM;AACd,aAAK,EAAE,KAAK;AACZ,sBAAc,EAAE,cAAc;AAC9B,sBAAc,EAAE,cAAc;KACjC,CAAC;;AAEF,QAAI,YAAY,GAAG;AACf,gBAAQ,EAAE,GAAG;AACb,eAAO,EAAE,KAAK;AACd,cAAM,EAAE,KAAK;AACb,eAAO,EAAE,KAAK;AACd,mBAAW,EAAG,CAAC,CAAC,EAAE,CAAC,EAAC,IAAI,CAAC;AACzB,mBAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC;KAC7B,CAAC;;AAEF,WAAO,OAAO,CAAC;;AAEf,aAAS,KAAK,GAAG;AACb,eAAO,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;AAC5C,kBAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC/B,eAAO,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;KAChC;;AAED,aAAS,KAAK,GAAG;AACb,kBAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC/B,eAAO,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;KAC/B;;AAED,aAAS,MAAM,GAAG;AACd,kBAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;AAChC,eAAO,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;KAChC;;AAED,aAAS,KAAK,GAAG;AACb,kBAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC/B,eAAO,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;KAChC;;AAED,aAAS,cAAc,CAAC,WAAW,EAAE;;AAEjC,eAAO,CAAC,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC;KAC3C;AACD,aAAS,cAAc,GAAG;AACtB,eAAO,CAAC,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AACpE,eAAO,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC;KAEpC;CACJ","file":"game-state.model.es5.js","sourcesContent":["'use strict';\r\n\r\nangular\r\n    .module('snake')\r\n    .factory('gameState', GameStateFactory);\r\n\r\nfunction GameStateFactory($rootScope) {\r\n    var service = {\r\n        state: {},\r\n        levelIndex : 0,\r\n        level : null,\r\n        start: start,\r\n        pause: pause,\r\n        resume: resume,\r\n        crash: crash,\r\n        setNextAdvance: setNextAdvance,\r\n        getNextAdvance: getNextAdvance\r\n    };\r\n\r\n    var defaultState = {\r\n        interval: 500, //ms\r\n        started: false,\r\n        paused: false,\r\n        crashed: false,\r\n        lastAdvance : [0, 0,'up'],\r\n        nextAdvance: [0, -1, 'up'] //x, y, direction\r\n    };\r\n\r\n    return service;\r\n\r\n    function start() {\r\n        angular.extend(service.state, defaultState);\r\n        $rootScope.$broadcast('start');\r\n        service.state.started = true;\r\n    }\r\n\r\n    function pause() {\r\n        $rootScope.$broadcast('pause');\r\n        service.state.paused = true;\r\n    }\r\n\r\n    function resume() {\r\n        $rootScope.$broadcast('resume');\r\n        service.state.paused = false;\r\n    }\r\n\r\n    function crash() {\r\n        $rootScope.$broadcast('crash');\r\n        service.state.crashed = true;\r\n    }\r\n\r\n    function setNextAdvance(nextAdvance) {\r\n        // service.state.lastAdvance = angular.copy(service.state.nextAdvance);\r\n        service.state.nextAdvance = nextAdvance;\r\n    }\r\n    function getNextAdvance() {\r\n        service.state.lastAdvance = angular.copy(service.state.nextAdvance);\r\n        return service.state.nextAdvance;\r\n        \r\n    }\r\n}"]}